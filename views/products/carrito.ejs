<% 
    console.log(data.librosUsuario)
    var montoFinal = data.session.librosUsuario.reduce((acc, libro) => acc + libro.monto, 0)

%> 

<!DOCTYPE html>

<html lang="es">

<head>

    <title>Carrito</title>

    <!-- Head -->
    <%- include("../partials/head") %>
    <!-- Fin del head -->

</head>

<body>

    <!-- Header -->

    <%- include('../partials/header') %>
    
    <!-- Fin del header -->

    <main>

        <% console.log(data.librosUsuario) %> 

        <div class="max-width">

        <div class = "titulo-entrada-carrito">
            <h2><strong> Tu carrito </strong></h2>

            <hr class="dropdown-divider">

            <div class="container-entrada-carrito">
                <i class="fas fa-shopping-cart"></i> 
                <span>Tienes una cantidad de <%= data.librosUsuario.length %>  articulos por un total de <b> $<%= montoFinal %>  </b> en tu carrito</span>
            </div>

            <hr class="dropdown-divider">

            
        </div>    

        <div class = "titulo-entrada-carrito">
            <h3> <b> Detalles de tu carrito </b> </h3>
        </div>  

        <ul class="lista-articulos">
            <% for (let libroUsuario of data.librosUsuario) { %> 
                <li class = "elemento-carrito">
                    <div class = "container-info-1">
                        <div> <img class = "libro-guion-carrito" src = "/img/products/<%= libroUsuario.imagen %>"> </div>
                        <div class = "info-producto">  
                                <h3 class = "carrito-titulo-libro"><%= libroUsuario.titulo %></h3>  
                                <div><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i></div>
                                <p class="precio-home">$<%= libroUsuario.precio %></p>
                                <p><%= libroUsuario.genero.nombre %></p>
                                <p><%= libroUsuario.autor.nombre %> </p>
                        </div>
                    </div>        
                    <div class = "container-info-2">
                        <div class = "carrito-cantidad-productos">
                            <select class="form-select" aria-label="cantidad-productos">
                                <option value="1" >1</option>
                                <option selected value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                            </select>
                        </div>
                        <div>
                            <span class="precio-home">$<%= libroUsuario.precio %> </span>
                        </div>
                        <div>
                            <button class = "btn btn-danger" >Eliminar</button>
                        </div>
                        
                    </div>
                </li>
            <% } %> 
        </ul>

        <div class = "carrito-compra">
            <img class = "logo-carrito" src = "/img/LOGO.png" >
            <div class= "info-carrito">
                <p>Gastos de envio: Gratuito</p>
                <p>Total: $4000</p>
                <div> <a href="/"><button class= 'boton-para-comprar'> COMPRAR </button></a></div>
            </div>
        </div>

        <section>
            <h4 class= 'libros-interesados'>Libros que tal vez te interesen</h4>
            <!-- Carrusel -->
            <%- include("../partials/carrusel") %>
            <!-- Fin del Carrusel -->

        </section>

        </div>

    </main>

    <!-- Footer -->

	<%- include("../partials/footer") %>

	<!-- Fin del footer -->

</body>

</html>